# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: Yandex Object Storage

–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Yandex Object Storage –¥–ª—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤.

---

## üöÄ –®–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ bucket (5 –º–∏–Ω—É—Ç)

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [Yandex Cloud](https://cloud.yandex.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ bucket —Å –∏–º–µ–Ω–µ–º `trust-the-route-media`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø (–¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤)

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (10-30 –º–∏–Ω—É—Ç)

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- –û—Ç–∫—Ä–æ–π—Ç–µ bucket
- –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫–∏: `images/routes/bus_b/` –∏ `audio/routes/bus_b/`
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Python —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install boto3

# 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ upload_to_yandex_storage.py
# –£–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ AWS_ACCESS_KEY_ID –∏ AWS_SECRET_ACCESS_KEY

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
python upload_to_yandex_storage.py
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ AWS CLI**
```bash
aws s3 sync app/src/main/assets/images/ s3://trust-the-route-media/images/routes/bus_b/ --endpoint-url=https://storage.yandexcloud.net
aws s3 sync app/src/main/assets/audio/ s3://trust-the-route-media/audio/routes/bus_b/ --endpoint-url=https://storage.yandexcloud.net
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ JSON —Ñ–∞–π–ª–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤

–í —Ñ–∞–π–ª–µ `app/src/main/assets/routes/bus_b_cw.json` –¥–æ–±–∞–≤—å—Ç–µ URL:

```json
{
  "attractions": [
    {
      "id": "attraction_1",
      "imageUrls": [
        "https://storage.yandexcloud.net/trust-the-route-media/images/routes/bus_b/attraction_1_image_1.jpg"
      ],
      "audioUrl": "https://storage.yandexcloud.net/trust-the-route-media/audio/routes/bus_b/attraction_1.mp3"
    }
  ]
}
```

### 4. –ì–æ—Ç–æ–≤–æ! ‚úÖ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—ã–µ URL, –µ—Å–ª–∏ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã –≤ JSON.
–ï—Å–ª–∏ –æ–±–ª–∞—á–Ω—ã–π URL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –∏–∑ assets (fallback).

---

## üìù –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏:**
   - –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ–±–ª–∞—á–Ω—ã–µ URL (`imageUrls`, `audioUrl`)
   - –ï—Å–ª–∏ –æ–±–ª–∞—á–Ω—ã–π URL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (`localImagePaths`, `localAudioPath`)

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - Coil –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - ExoPlayer –∫—ç—à–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã
   - HTTP –∫—ç—à —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç API –æ—Ç–≤–µ—Ç—ã

3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
   - –ï—Å–ª–∏ –≤ JSON –Ω–µ—Ç –æ–±–ª–∞—á–Ω—ã—Ö URL, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
   - –°—Ç–∞—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `Constants.kt` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

```kotlin
// –ë–∞–∑–æ–≤—ã–π URL —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
const val YANDEX_STORAGE_BASE_URL = "https://storage.yandexcloud.net/trust-the-route-media"

// –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
const val USE_CLOUD_STORAGE_FIRST = true // true = —Å–Ω–∞—á–∞–ª–∞ –æ–±–ª–∞–∫–æ, false = —Å–Ω–∞—á–∞–ª–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
```

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –æ–¥–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN** - –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ç—Ä–∞—Ñ–∏–∫** - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ Yandex Cloud Console
4. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–∞–∫ backup

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `YANDEX_OBJECT_STORAGE_SETUP.md`
