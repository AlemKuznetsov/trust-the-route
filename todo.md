# План разработки Android приложения "Trust The Route"

## Этап 1: Подготовка и настройка проекта ✅
- [x] Создание структуры проекта Android
- [x] Настройка Gradle файлов
- [ ] Настройка зависимостей (Yandex MapKit SDK, ExoPlayer, Room, Retrofit, Hilt)
- [ ] Настройка манифеста с разрешениями (геолокация, интернет, аудио)

## Этап 2: Базовая архитектура и навигация
- [ ] Настройка архитектуры MVVM
- [ ] Настройка Dependency Injection (Hilt)
- [ ] Создание системы навигации (Jetpack Navigation)
- [ ] Настройка темы приложения (Material Design 3)

## Этап 3: Модуль аутентификации
- [ ] Экран регистрации (email, пароль)
- [ ] Интеграция с Yandex IAM для регистрации
- [ ] Экран входа в аккаунт
- [ ] Восстановление пароля через email
- [ ] Сохранение сессии пользователя

## Этап 4: Главное меню
- [ ] Экран главного меню с тремя кнопками:
  - Маршруты
  - Настройки
  - О нас
- [ ] Анимации и переходы между экранами

## Этап 5: Выбор маршрутов
- [ ] Экран списка маршрутов
- [ ] Поиск маршрута по номеру или названию
- [ ] Отображение карточек маршрутов с описанием
- [ ] Навигация к экрану карты

## Этап 6: Карта и геолокация
- [ ] Интеграция Яндекс MapKit SDK
- [ ] Отображение интерактивной карты
- [ ] Отображение маршрута автобуса на карте
- [ ] Отображение меток достопримечательностей
- [ ] Реализация отслеживания GPS местоположения
- [ ] Оптимизация обновления геолокации (каждые 2 секунды)

## Этап 7: Система определения достопримечательностей
- [ ] Алгоритм определения приближения (50-100 метров)
- [ ] Автоматическое отображение карточки при приближении
- [ ] Автоматическое воспроизведение аудио при приближении
- [ ] Обработка множественных достопримечательностей

## Этап 8: Карточки достопримечательностей
- [ ] Модальное окно с карточкой достопримечательности
- [ ] Отображение изображения, названия, описания
- [ ] Анимация появления карточки
- [ ] Кнопка закрытия

## Этап 9: Аудиогид
- [ ] Интеграция ExoPlayer
- [ ] Воспроизведение аудиодорожек
- [ ] UI аудиоплеера (Play/Pause, прогресс-бар)
- [ ] Управление воспроизведением (пауза при удалении, переключение)
- [ ] Настройка отключения аудиогида

## Этап 10: База данных и оффлайн-доступ
- [ ] Создание схемы Room Database
- [ ] Entity для маршрутов
- [ ] Entity для достопримечательностей
- [ ] DAO для работы с данными
- [ ] Репозиторий для синхронизации данных
- [ ] Кэширование маршрутов в SQLite
- [ ] Кэширование достопримечательностей
- [ ] Локальное хранение аудиофайлов
- [ ] Локальное хранение изображений
- [ ] Логика работы в оффлайн режиме

## Этап 11: Настройки приложения
- [ ] Экран настроек с категориями:
  - Настройка учетной записи
  - Язык (русский, английский, немецкий)
  - Тема приложения (светлая/темная)
  - Уведомления
  - Размер шрифта
  - Конфиденциальность и безопасность
  - Информация о приложении
- [ ] Детальные экраны для каждой категории
- [ ] Сохранение настроек в SharedPreferences/DataStore

## Этап 12: Темная тема
- [ ] Реализация светлой темы
- [ ] Реализация темной темы
- [ ] Переключатель темы в настройках
- [ ] Сохранение выбранной темы

## Этап 13: Локализация
- [ ] Подготовка строковых ресурсов
- [ ] Русская локализация
- [ ] Английская локализация
- [ ] Немецкая локализация (опционально)
- [ ] Переключение языка в настройках

## Этап 14: Push-уведомления
- [ ] Настройка Firebase Cloud Messaging
- [ ] Регистрация устройства для получения уведомлений
- [ ] Обработка уведомлений о новых маршрутах
- [ ] Настройка управления уведомлениями

## Этап 15: Экран "О нас"
- [ ] Экран с описанием приложения
- [ ] Карточки: Миссия, Ценности, Команда
- [ ] Версия приложения и копирайт

## Этап 16: Оптимизация и тестирование
- [ ] Оптимизация производительности
- [ ] Тестирование на устройствах с 2GB RAM
- [ ] Оптимизация обновления геолокации
- [ ] Оптимизация работы с картами
- [ ] Оптимизация памяти для аудио и изображений
- [ ] Тестирование оффлайн режима

## Этап 17: Тестирование
- [ ] Unit тесты для ViewModels
- [ ] Unit тесты для репозиториев
- [ ] Unit тесты для утилит (геолокация, расстояние)
- [ ] Integration тесты для базы данных
- [ ] UI тесты для основных экранов
- [ ] Тесты производительности

## Этап 18: Финальная проверка
- [ ] Проверка всех требований из ТЗ
- [ ] Тестирование на Android 8.0+
- [ ] Проверка работы на экранах 720p
- [ ] Финальная оптимизация
- [ ] Подготовка к релизу

---

## Технический стек:
- **Язык**: Kotlin
- **UI**: Jetpack Compose
- **Архитектура**: MVVM + Clean Architecture
- **DI**: Hilt
- **База данных**: Room (SQLite)
- **Карты**: Yandex MapKit SDK
- **Аудио**: ExoPlayer
- **Сеть**: Retrofit + OkHttp
- **Навигация**: Jetpack Navigation Component
- **Аутентификация**: Yandex IAM
- **Уведомления**: Firebase Cloud Messaging
- **Минимальная версия**: Android 8.0 (API 26)
- **Целевая версия**: Android 14 (API 34)

## Критерии приемки:
- ✅ Время отклика интерфейса < 1 секунды
- ✅ Обновление геолокации каждые 2 секунды
- ✅ Работа на Android 8.0+
- ✅ Работа на устройствах с 2GB RAM и экраном 720p
- ✅ Частичный оффлайн-доступ через SQLite
- ✅ Автоматическое определение достопримечательностей на расстоянии 50-100 метров
